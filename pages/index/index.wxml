<!-- pages/index/index.wxml -->
<view class="container">
  <!-- 搜索栏 -->
  <view class="search-bar" bindtap="goToSearch">
    <view class="search-input">
      <text class="search-placeholder">搜索闲置物品...</text>
    </view>
  </view>

  <!-- 标签切换 -->
  <view class="tabs">
    <view 
      class="tab {{activeTab === 'cash' ? 'active' : ''}}" 
      data-tab="cash" 
      bindtap="switchTab"
    >现金交易</view>
    <view 
      class="tab {{activeTab === 'swap' ? 'active' : ''}}" 
      data-tab="swap" 
      bindtap="switchTab"
    >以物换物</view>
  </view>

  <!-- 商品列表 -->
  <view class="goods-list">
    <block wx:if="{{activeTab === 'cash'}}">
      <view 
        class="goods-item" 
        wx:for="{{cashGoodsList}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="goToDetail"
      >
        <image 
          class="goods-image" 
          src="{{item.image}}" 
          mode="aspectFill"
          binderror="onImageError"
          data-index="{{index}}"
         style="width: 202rpx; display: block; box-sizing: border-box; position: relative; left: -2rpx; top: 18rpx; height: 214rpx"></image>
        <view class="goods-info">
          <view class="goods-header">
            <view class="goods-title">{{item.title}}</view>
            <view class="goods-price">¥{{item.price}}</view>
          </view>
          <view class="goods-meta">
            <view class="goods-user">{{item.user.nickname}}</view>
            <view class="goods-time" style="position: relative; left: 0rpx; top: -19rpx">{{item.createTime}}</view>
          </view>
          <view class="goods-tags">
            <text class="goods-tag" style="position: relative; left: 0rpx; top: 60rpx">{{item.tag}}</text>
          </view>
          <view class="goods-footer">
            <view class="goods-type">{{item.transactionType}}</view>
          </view>
        </view>
      </view>
    </block>

    <block wx:else>
      <view 
        class="goods-item" 
        wx:for="{{swapGoodsList}}" 
        wx:key="id"
        data-id="{{item.id}}"
        bindtap="goToDetail"
      >
        <image 
          class="goods-image" 
          src="{{item.image}}" 
          mode="aspectFill"
          binderror="onImageError"
          data-index="{{index}}"
          style="width: 202rpx; display: block; box-sizing: border-box; position: relative; left: -2rpx; top: 18rpx; height: 214rpx"
        ></image>
        <view class="goods-info">
          <view class="goods-header">
            <view class="goods-title">{{item.title}}</view>
            <view class="goods-price">¥{{item.price}}</view>
          </view>
          <view class="goods-meta">
            <view class="goods-user">{{item.user.nickname}}</view>
            <view class="goods-time">{{item.createTime}}</view>
          </view>
          <view class="goods-tags">
            <text class="goods-tag" style="position: relative; left: 0rpx; top: 60rpx">{{item.tag}}</text>
          </view>
          <view class="goods-footer">
            <view class="goods-type">{{item.transactionType}}</view>
          </view>
        </view>
      </view>
    </block>
  </view>
</view>