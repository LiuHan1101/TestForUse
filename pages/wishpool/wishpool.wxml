<!-- pages/wishpool/wishpool.wxml -->
<view class="wishpool-page">
    <!-- æœç´¢æ  -->
    <view class="search-section">
<<<<<<< HEAD
        <view class="search-bar">
            <input class="search-input" placeholder="æœç´¢æ„¿æœ›..." bindinput="onSearch" value="{{searchValue}}" />
=======
        <view class="search-bar" bindtap="goToSearch">
            <input class="search-input" placeholder="æœç´¢æ„¿æœ›..." value="{{searchValue}}" disabled />
>>>>>>> wishpool
            <view class="search-icon">ğŸ”</view>
        </view>
    </view>

<<<<<<< HEAD
    <!-- æ ‡ç­¾åˆ‡æ¢ -->
    <view class="tabs-section">
        <view class="tabs">
            <view class="tab {{activeTab === 'all' ? 'active' : ''}}" data-tab="all" bindtap="switchTab" style="position: relative; left: 2rpx; top: 1rpx">
                å…¨éƒ¨æ„¿æœ›
                <view class="tab-badge" wx:if="{{wishList.length}}" style="position: absolute; left: 147rpx; top: 0rpx">{{wishList.length}}</view>
            </view>
            <view class="tab {{activeTab === 'mine' ? 'active' : ''}}" data-tab="mine" bindtap="switchTab" style="position: relative; left: -4rpx; top: 3rpx">
                æˆ‘çš„æ„¿æœ›
                <view class="tab-badge" wx:if="{{myWishes.length}}">{{myWishes.length}}</view>
            </view>
        </view>
    </view>

    <!-- ä¾§è¾¹æ å’Œå†…å®¹åŒºåŸŸ -->
    <view class="main-content">
        <!-- ä¾§è¾¹æ  -->
        <view class="sidebar-section" style="width: 175rpx; height: 2091rpx; display: block; box-sizing: border-box">
=======
    <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
    <view class="main-content">
        <!-- ä¾§è¾¹æ  -->
        <view class="sidebar-section">
>>>>>>> wishpool
            <t-side-bar value="{{contentSidebar}}" bind:change="onContentSideBarChange" class="category-sidebar">
                <t-side-bar-item wx:for="{{categoryList}}" wx:key="value" label="{{item.label}}" value="{{item.value}}" />
            </t-side-bar>
        </view>

        <!-- å†…å®¹åŒºåŸŸ -->
        <view class="content-area">
<<<<<<< HEAD
            <!-- åˆ†ç±»å†…å®¹ -->
            <view wx:if="{{contentSidebar === 'study'}}" class="category-content">
                <text class="content-title">å­¦ä¹ ç›¸å…³æ„¿æœ›</text>
                <view class="wish-item">ğŸ“š è€ƒä¸Šç†æƒ³çš„å¤§å­¦</view>
                <view class="wish-item">ğŸ’» å­¦ä¼šä¸€é—¨ç¼–ç¨‹è¯­è¨€</view>
                <view class="wish-item">ğŸ”¤ é€šè¿‡è‹±è¯­å››çº§</view>
                <view class="wish-item">ğŸ“– è¯»å®Œ20æœ¬ä¹¦</view>
                <view class="wish-item">ğŸ“ è·å¾—å¥–å­¦é‡‘</view>
                <view class="wish-item">ğŸ“š è€ƒä¸Šç†æƒ³çš„å¤§å­¦</view>
                <view class="wish-item">ğŸ’» å­¦ä¼šä¸€é—¨ç¼–ç¨‹è¯­è¨€</view>
                <view class="wish-item">ğŸ”¤ é€šè¿‡è‹±è¯­å››çº§</view>
                <view class="wish-item">ğŸ“– è¯»å®Œ20æœ¬ä¹¦</view>
                <view class="wish-item">ğŸ“ è·å¾—å¥–å­¦é‡‘</view>
                <view class="wish-item">ğŸ“š è€ƒä¸Šç†æƒ³çš„å¤§å­¦</view>
                <view class="wish-item">ğŸ’» å­¦ä¼šä¸€é—¨ç¼–ç¨‹è¯­è¨€</view>
                <view class="wish-item">ğŸ”¤ é€šè¿‡è‹±è¯­å››çº§</view>
                <view class="wish-item">ğŸ“– è¯»å®Œ20æœ¬ä¹¦</view>
                <view class="wish-item">ğŸ“ è·å¾—å¥–å­¦é‡‘</view>
            </view>

            <view wx:elif="{{contentSidebar === 'life'}}" class="category-content">
                <text class="content-title">ç”Ÿæ´»ç›¸å…³æ„¿æœ›</text>
                <view class="wish-item">ğŸ”ï¸ å»è¥¿è—æ—…è¡Œ</view>
                <view class="wish-item">ğŸ‘¨â€ğŸ³ å­¦ä¼šåšé¥­</view>
                <view class="wish-item">ğŸ¶ å…»ä¸€åªå® ç‰©</view>
                <view class="wish-item">ğŸ  å¸ƒç½®æ¸©é¦¨çš„å°çª</view>
                <view class="wish-item">ğŸµ å­¦ä¼šå¼¹å‰ä»–</view>
            </view>

            <view wx:elif="{{contentSidebar === 'work'}}" class="category-content">
                <text class="content-title">å·¥ä½œç›¸å…³æ„¿æœ›</text>
                <view class="wish-item">ğŸ’¼ æ‰¾åˆ°æ»¡æ„çš„å·¥ä½œ</view>
                <view class="wish-item">ğŸ“ˆ å‡èŒåŠ è–ª</view>
                <view class="wish-item">ğŸš€ å®Œæˆé‡è¦é¡¹ç›®</view>
                <view class="wish-item">ğŸ¤ æ‹“å±•äººè„‰å…³ç³»</view>
                <view class="wish-item">ğŸ’¡ å­¦ä¹ æ–°æŠ€èƒ½</view>
            </view>

            <view wx:elif="{{contentSidebar === 'health'}}" class="category-content">
                <text class="content-title">å¥åº·ç›¸å…³æ„¿æœ›</text>
                <view class="wish-item">ğŸƒâ€â™‚ï¸ åšæŒæ¯å‘¨è¿åŠ¨</view>
                <view class="wish-item">ğŸ¥— å…»æˆå¥åº·é¥®é£Ÿä¹ æƒ¯</view>
                <view class="wish-item">ğŸ˜´ ä¿è¯å……è¶³ç¡çœ </view>
                <view class="wish-item">ğŸ§˜â€â™€ï¸ å­¦ä¹ å†¥æƒ³æ”¾æ¾</view>
                <view class="wish-item">âš–ï¸ ä¿æŒç†æƒ³ä½“é‡</view>
            </view>

            <view wx:else class="category-content">
                <text class="content-title">å…¨éƒ¨æ„¿æœ›</text>
                <view class="welcome-text">è¯·é€‰æ‹©å·¦ä¾§åˆ†ç±»æŸ¥çœ‹å…·ä½“æ„¿æœ›</view>
=======
            <!-- åˆ†ç±»æ ‡é¢˜ -->
            <view class="category-header">
                <text class="category-title">{{currentCategoryLabel}}æ„¿æœ›</text>
                <text class="wish-count">({{wishList.length}}ä¸ª)</text>
>>>>>>> wishpool
            </view>

            <!-- æ„¿æœ›åˆ—è¡¨ -->
            <view class="wish-list">
<<<<<<< HEAD
                <block wx:if="{{activeTab === 'all'}}">
                    <view class="wish-card {{item.status === 'fulfilled' ? 'fulfilled' : ''}}" 
                          wx:for="{{wishList}}" wx:key="id" data-id="{{item.id}}" bindtap="onWishItemTap">
                        <view class="wish-header">
                            <view class="wish-title">{{item.title}}</view>
                            <view class="wish-type {{item.wishType}}">
                                {{item.wishType === 'buy' ? 'æ±‚è´­' : 'æ±‚æ¢'}}
                            </view>
                        </view>

                        <view class="wish-description">{{item.description}}</view>

                        <view class="wish-expectation">
                            <text class="expect-label">æœŸæœ›ï¼š</text>
                            <text class="expect-value">
                                {{item.wishType === 'buy' ? 'Â¥' + item.expectedPrice : item.expectedSwap}}
                            </text>
                        </view>

                        <view class="wish-footer">
                            <view class="user-info">
                                <image class="user-avatar" src="{{item.user.avatar}}"></image>
                                <text class="user-name">{{item.user.nickname}}</text>
                                <text class="user-college">Â· {{item.user.college}}</text>
                            </view>
                            <view class="wish-meta">
                                <text class="match-count" wx:if="{{item.matchCount > 0}}">
                                    {{item.matchCount}}ä¸ªåŒ¹é…
                                </text>
                                <text class="create-time">{{item.createTime}}</text>
                            </view>
                        </view>

                        <!-- å·²å®ç°æ ‡è¯† -->
                        <view class="fulfilled-badge" wx:if="{{item.status === 'fulfilled'}}">ğŸ‰ å·²å®ç°</view>

                        <!-- åˆ†äº«æŒ‰é’® -->
                        <view class="wish-actions" catchtap="onShareWish" data-id="{{item.id}}">
                            <text class="share-btn">ğŸ“¤ åˆ†äº«</text>
                        </view>
                    </view>
                </block>

                <block wx:else>
                    <view class="wish-card mine" wx:for="{{myWishes}}" wx:key="id" data-id="{{item.id}}" bindtap="onWishItemTap">
                        <view class="wish-header">
                            <view class="wish-title">{{item.title}}</view>
                            <view class="wish-status {{item.status}}">
                                {{item.status === 'pending' ? 'å¾…å®ç°' : 'å·²å®ç°'}}
                            </view>
                        </view>

                        <view class="wish-description">{{item.description}}</view>

                        <view class="wish-expectation">
                            <text class="expect-label">æœŸæœ›ï¼š</text>
                            <text class="expect-value">
                                {{item.wishType === 'buy' ? 'Â¥' + item.expectedPrice : item.expectedSwap}}
                            </text>
                        </view>

                        <view class="wish-footer">
                            <view class="match-info">
                                <text class="match-count" wx:if="{{item.matchCount > 0}}">
                                    {{item.matchCount}}ä¸ªå•†å“åŒ¹é…
                                </text>
                                <text class="no-match" wx:else>æš‚æ— åŒ¹é…</text>
                            </view>
                            <view class="my-wish-actions">
                                <text class="action-btn edit" catchtap="onEditWish" data-id="{{item.id}}">ç¼–è¾‘</text>
                                <text class="action-btn delete" catchtap="onDeleteWish" data-id="{{item.id}}">åˆ é™¤</text>
                            </view>
                        </view>
                    </view>
                </block>

                <!-- ç©ºçŠ¶æ€ -->
                <view class="empty-state" wx:if="{{getCurrentList().length === 0}}">
                    <view class="empty-icon">â­</view>
                    <view class="empty-text">æš‚æ— æ„¿æœ›</view>
                    <view class="empty-desc">å‘å¸ƒä½ çš„ç¬¬ä¸€ä¸ªæ„¿æœ›å§</view>
                </view>
            </view>
        </view>
    </view>

    <!-- å‘å¸ƒæŒ‰é’® -->
    <view class="publish-fab" bindtap="onPublishWish">
        <text class="fab-icon">+</text>
        <text class="fab-text">å‘å¸ƒæ„¿æœ›</text>
    </view>
=======
                <view class="wish-card" 
                      wx:for="{{wishList}}" 
                      wx:key="id" 
                      data-id="{{item.id}}" 
                      bindtap="goToDetail">
                    
                    <!-- ç¬¬ä¸€è¡Œï¼šæ„¿æœ›æ ‡é¢˜ -->
                    <view class="wish-title">{{item.title}}</view>
                    
                    <!-- ç¬¬äºŒè¡Œï¼šç”¨æˆ·ä¿¡æ¯å’Œå‘å¸ƒæ—¶é—´ -->
                    <view class="wish-meta">
                        <view class="user-info">
                            <image class="user-avatar" src="{{item.user.avatar}}"></image>
                            <text class="user-name">{{item.user.nickname}}</text>
                        </view>
                        <text class="create-time">{{item.createTime}}</text>
                    </view>
                    
                    <!-- ç¬¬ä¸‰è¡Œï¼šæ„¿æœ›å›¾ç‰‡ï¼ˆå¦‚æœæœ‰ï¼‰ -->
                    <view class="wish-image-section" wx:if="{{item.image}}">
                        <image class="wish-image" 
                               src="{{item.image}}" 
                               mode="aspectFill"
                               data-index="{{index}}"
                               binderror="onImageError"
                               lazy-load="true"></image>
                    </view>
                    
                    <!-- æ„¿æœ›æè¿° -->
                    <view class="wish-description" wx:if="{{item.description}}">
                        {{item.description}}
                    </view>
                    
                    <!-- åº•éƒ¨ï¼šä»·æ ¼å’Œäº¤æ˜“æ–¹å¼ -->
                    <view class="wish-footer">
                        <view class="wish-tags">
                            <view class="category-tag">{{item.tag}}</view>
                            <view class="transaction-type {{item.transactionType}}">
                                {{item.transactionType === 'cash' ? 'ç°é‡‘' : item.transactionType === 'swap' ? 'æ¢ç‰©' : 'å‡å¯'}}
                            </view>
                        </view>
                        <view class="price-section">
                            <!-- ç°é‡‘ä»·æ ¼æ˜¾ç¤º -->
                            <view class="price-display" wx:if="{{item.priceDisplay}}">
                                {{item.priceDisplay}}
                            </view>
                            <!-- æ¢ç‰©æ˜¾ç¤º -->
                            <view class="swap-display" wx:if="{{item.transactionType === 'swap' || item.transactionType === 'both'}}">
                                æ¢ç‰©
                            </view>
                        </view>
                    </view>
                </view>

                <!-- ç©ºçŠ¶æ€ -->
                <view class="empty-state" wx:if="{{wishList.length === 0 && !isLoading}}">
                    <view class="empty-icon">â­</view>
                    <view class="empty-text">è¯¥åˆ†ç±»æš‚æ— æ„¿æœ›</view>
                    <view class="empty-desc">å‘å¸ƒä½ çš„ç¬¬ä¸€ä¸ªæ„¿æœ›å§</view>
                </view>

                <!-- åŠ è½½çŠ¶æ€ -->
                <view class="loading-state" wx:if="{{isLoading}}">
                    <view class="loading-text">åŠ è½½ä¸­...</view>
                </view>
            </view>
        </view>
    </view>
>>>>>>> wishpool
</view>