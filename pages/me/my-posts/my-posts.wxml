<view class="container">
  <!-- 页面标题和统计 -->
  <view class="page-header">
    <text class="page-title">我的发布</text>
    <text class="post-count">共{{postsList.length}}件商品</text>
  </view>

  <!-- 商品列表 -->
  <view class="posts-list">
    <block wx:for="{{postsList}}" wx:key="id">
      <view class="post-item">
        <!-- 商品图片 -->
        <image class="post-image" src="{{item.images[0]}}" mode="aspectFill"></image>
        
        <!-- 商品详细信息 -->
        <view class="post-details">
          <!-- 基本信息 -->
          <view class="basic-info">
            <text class="post-title">{{item.title}}</text>
            <text class="post-status {{item.status}}">{{getStatusText(item.status)}}</text>
          </view>
          
          <text class="post-description">{{item.description}}</text>
          
          <!-- 价格信息 -->
          <view class="price-info">
            <text class="price-label">价格：</text>
            <text wx:if="{{item.transactionType === 'cash'}}" class="price-value">
              ¥{{formatPrice(item.price)}}
            </text>
            <text wx:else class="price-value exchange">可交换</text>
          </view>
          
          <!-- 期望交换 -->
          <view class="expected-swap" wx:if="{{item.expectedSwap}}">
            <text class="swap-label">期望交换：</text>
            <text class="swap-value">{{item.expectedSwap}}</text>
          </view>
          
          <!-- 分类信息 -->
          <view class="category-info">
            <text class="category-label">分类：</text>
            <text class="category-value">
              {{item.categories ? item.categories.join(' > ') : '未分类'}}
            </text>
          </view>
          
          <!-- 交易类型 -->
          <view class="transaction-info">
            <text class="transaction-label">交易方式：</text>
            <text class="transaction-value">
              {{item.transactionType === 'cash' ? '现金交易' : '物品交换'}}
            </text>
          </view>
          
          <!-- 统计数据 -->
          <view class="stats-info">
            <text class="stat-item">浏览：{{item.viewCount || 0}}</text>
            <text class="stat-item">喜欢：{{item.likeCount || 0}}</text>
          </view>
          
          <!-- 发布时间 -->
          <view class="time-info">
            <text class="time-label">发布时间：</text>
            <text class="time-value">{{formatTime(item.createTime)}}</text>
          </view>
          
          <!-- 商品ID (用于调试) -->
          <view class="debug-info" wx:if="{{false}}">
            <text class="debug-label">商品ID：</text>
            <text class="debug-value">{{item.id}}</text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{postsList.length === 0 && !loading}}" class="empty-state">
    <image src="/images/empty-posts.png" class="empty-image"></image>
    <text class="empty-text">您还没有发布任何商品</text>
    <button class="publish-btn" bindtap="onPublishTap">去发布</button>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-text">加载中...</text>
  </view>
</view>