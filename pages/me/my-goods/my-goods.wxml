<view class="container">
  <!-- 顶部统计信息 -->
  <view class="stats-header">
    <view class="stat-item">
      <text class="stat-number">{{totalCount}}</text>
      <text class="stat-label">在售商品</text>
    </view>
  </view>

  <!-- 商品列表 -->
  <view class="goods-list">
    <block wx:for="{{goodsList}}" wx:key="id">
      <view class="goods-item" bindtap="onGoodsTap" data-id="{{item.id}}">
        <image class="goods-image" src="{{item.images[0]}}" mode="aspectFill" lazy-load="true"></image>
        <view class="goods-info">
          <text class="goods-title">{{item.title}}</text>
          <text class="goods-desc">{{item.description}}</text>
          <view class="goods-meta">
            <text class="goods-category">{{item.categories ? item.categories[0] : '未分类'}}</text>
            <text class="goods-time">{{formatTime(item.createTime)}}</text>
          </view>
          <view class="goods-bottom">
            <view class="price-section">
              <text wx:if="{{item.transactionType === 'cash'}}" class="goods-price">
                ¥{{formatPrice(item.price)}}
              </text>
              <text wx:else class="goods-price">可交换</text>
            </view>
            <view class="stats-section">
              <text class="view-count">浏览 {{item.viewCount || 0}}</text>
              <text class="like-count">喜欢 {{item.likeCount || 0}}</text>
            </view>
          </view>
          <view class="goods-status">
            <text class="status-tag {{item.status === 'selling' ? 'on-sale' : 'sold-out'}}">
              {{item.status === 'selling' ? '在售' : '已下架'}}
            </text>
          </view>
        </view>
      </view>
    </block>
  </view>

  <!-- 空状态 -->
  <view wx:if="{{goodsList.length === 0 && !loading}}" class="empty-state">
    <image src="/images/empty-goods.png" class="empty-image"></image>
    <text class="empty-text">暂无在售商品</text>
    <text class="empty-subtext">快去发布你的第一件商品吧</text>
    <button class="publish-btn" bindtap="onPublishTap">发布商品</button>
  </view>

  <!-- 加载状态 -->
  <view wx:if="{{loading}}" class="loading-state">
    <text class="loading-text">加载中...</text>
  </view>

  <!-- 加载更多 -->
  <view wx:if="{{hasMore && !loading}}" class="load-more">
    <text>上拉加载更多</text>
  </view>
  <view wx:if="{{!hasMore && goodsList.length > 0}}" class="load-more">
    <text>没有更多商品了</text>
  </view>
</view>